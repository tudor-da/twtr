module Tests where
import Tweet
import User

users_test = scenario do
  alice <- getParty "alice"
  aliceU <- submit alice do create User with username = alice, reviewers = []
  
  bob <- getParty "bob"
  bobU <- submit bob do create User with username = bob, reviewers = []

  charlie <- getParty "charlie"
  charlieU <- submit charlie do create User with username = charlie, reviewers = []

  newAliceU <- submit alice (exercise aliceU (AddReviewer bob))
  newAlice <- submit alice (exercise newAliceU (AddReviewer charlie))

  t1 <- submit alice (exercise newAlice (PublishTweet "hi"))

  t2 <- submit bob (exercise t1 (TweetProposal_Sign bob))
  submitMustFail alice (exercise t2 Tweet_Release)

  t3 <- submit charlie (exercise t2 (TweetProposal_Sign charlie))

  submit alice (exercise t3 Tweet_Release)
